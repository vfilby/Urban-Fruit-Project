- title( @fruit_cache.name )

.row
  .span6
    %p
      = @fruit_cache.description
      
    %h3#photos_count
      -if @fruit_cache.images.size > 0
        = pluralize(@fruit_cache.images.size, "Photo")
      -else
        = "No photos :'("

    #slideshowModal.modal.modal-fullwidth.fade{ :style=>"display: none"}
      .modal-header
        %a.close{:'data-dismiss'=>"modal"} Ã—
        %h3 Slideshow
      .modal-body
        - if @fruit_cache.images && @fruit_cache.images.count > 0
          #myCarousel.carousel
            .carousel-inner
              - @fruit_cache.images[0..0].each do |image|
                .item.active
                  = image_tag image.photo.url(:fullwidth_crop)
                  - if image.caption
                    .carousel-caption
                      = image.caption
              - if @fruit_cache.images && @fruit_cache.images.count > 1
                - @fruit_cache.images[1..-1].each do |image|
                  .item
                    = image_tag image.photo.url(:fullwidth_crop)
                    - if image.caption
                      .carousel-caption
                        = image.caption
            - if @fruit_cache.images && @fruit_cache.images.count > 1 
              %a.carousel-control.left{ :href=>'#myCarousel', :'data-slide'=>"prev"} &lsaquo;
              %a.carousel-control.right{ :href=>'#myCarousel', :'data-slide'=>"next"} &rsaquo;

        

    %ul.thumbnails#images
      - @fruit_cache.images.each do |image|
        %li
          %a{'data-toggle'=>"modal", :href=>"#slideshowModal"}
            = render :partial => "images/smallthumbnail", :locals => { :image => image }

    = render :partial => "uploadify"

    = form_for Image.new(:fruit_cache_id => @fruit_cache.id), :html => {:multipart => true} do |f|
      = f.hidden_field :fruit_cache_id, "value" => @fruit_cache.id
      %p
        = f.file_field :photo
      %p
        = f.submit "Upload photos...", :id => "image_submit"

    %h3 Logs
    - @fruit_cache.log_entries.each do |log|
      .log_entry
        .text
          = log.text

    = link_to 'Add log entry', new_fruit_cache_log_entry_path( @fruit_cache )
      
  .span6
    = gmaps( :map_options => { :container_class => "map_container", :class => "height300" },:markers => { "data" => @json} )
    
    %h3
      Nearby Caches
    %ul
      - @fruit_cache.nearbys.each do |cache|
        %li
          %a{ :href => fruit_cache_path(cache.id)}
            = cache.name

